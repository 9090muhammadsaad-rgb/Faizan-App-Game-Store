<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Faizan Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
/* --- RESET --- */
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial, sans-serif;}
body{background:#fff;color:#000;transition:background 0.3s, color 0.3s;}
a{text-decoration:none;color:inherit;}
button{cursor:pointer;transition:0.2s}

/* --- HEADER --- */
header{display:flex;align-items:center;justify-content:space-between;padding:10px 15px;background:#f8f8f8;position:sticky;top:0;z-index:100;box-shadow:0 2px 6px rgba(0,0,0,0.05);}
header input[type=search]{flex:1;padding:8px;margin-right:10px;border-radius:8px;border:1px solid #ccc;}
header button{padding:8px 12px;border:none;border-radius:8px;background:linear-gradient(45deg,#00aaff,#00ff99);color:#fff;font-weight:bold;}

/* --- FILTER BUTTONS --- */
.filters{display:flex;justify-content:center;gap:10px;padding:10px;flex-wrap:wrap;}
.filters button{padding:6px 12px;border-radius:8px;border:1px solid #ccc;background:#eee;font-weight:bold;}

/* --- GRID CARDS --- */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;padding:12px;}
.card{background:#f5f5f5;border-radius:12px;padding:10px;position:relative;cursor:pointer;display:flex;flex-direction:column;align-items:center;text-align:center;box-shadow:0 2px 6px rgba(0,0,0,0.1);transition:transform 0.2s, box-shadow 0.2s;}
.card:hover{transform:translateY(-4px);box-shadow:0 6px 12px rgba(0,0,0,0.2);}
.card img{width:100%;height:100px;object-fit:cover;border-radius:10px;}
.card .title{font-size:14px;margin:6px 0;font-weight:bold;}
.card .cat{font-size:12px;color:#666;}
.card .owner{font-size:11px;color:#0077cc;cursor:pointer;}
.trending{position:absolute;top:6px;left:6px;background:#ff9800;color:#000;font-size:11px;padding:2px 6px;border-radius:6px;font-weight:bold;}

/* --- HORIZONTAL CAROUSEL --- */
.horizontal{display:flex;overflow-x:auto;padding:10px;gap:12px;}
.horizontal::-webkit-scrollbar{height:6px;}
.horizontal::-webkit-scrollbar-thumb{background:#ccc;border-radius:3px;}
.horizontal::-webkit-scrollbar-track{background:#f5f5f5;}

/* --- DETAILS PAGE --- */
#details{display:none;padding:12px;}
#details .back{padding:6px 12px;background:#00aaff;color:#fff;border:none;border-radius:6px;margin-bottom:10px;display:inline-block;}
#details img.icon{width:80px;height:80px;border-radius:12px;object-fit:cover;}
#details .btn{padding:6px 10px;border:none;border-radius:6px;background:#eee;color:#000;margin:2px;cursor:pointer;}
#details .screens{display:flex;overflow-x:auto;gap:8px;margin:10px 0;}
#details .screens img,#details .screens video{height:120px;border-radius:8px;object-fit:cover;}
#recommended{margin-top:20px;}
#recommended .rec-card{background:#eee;padding:8px;border-radius:8px;display:flex;align-items:center;gap:8px;margin:5px 0;color:#000;}
#recommended .rec-card img{width:40px;height:40px;border-radius:6px;object-fit:cover;}

/* --- SETTINGS MODAL --- */
#settingsModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:200;padding:20px;overflow:auto;color:#000;}
#settingsModal label{display:block;margin-top:10px;font-weight:bold;}
#settingsModal select,input{padding:6px;margin-top:4px;width:100%;border-radius:6px;border:1px solid #ccc;}
#settingsModal button{margin-top:10px;background:#00aaff;color:#fff;padding:8px 12px;border:none;border-radius:6px;}
</style>
</head>
<body>

<header>
  <input type="search" id="search" placeholder="Search Games or Apps" oninput="filterList()">
  <button onclick="toggleSettings()">‚öôÔ∏è Settings</button>
</header>

<div class="filters">
  <button onclick="setType('all')">üè† All</button>
  <button onclick="setType('game')">üéÆ Game</button>
  <button onclick="setType('app')">‚ùì App</button>
</div>

<h3 style="padding-left:12px;">üî• Trending</h3>
<div id="trending" class="horizontal"></div>

<h3 style="padding-left:12px;">üéÅ Featured / Random Category</h3>
<div id="randomCategory" class="horizontal"></div>

<div id="list" class="grid"></div>

<div id="details">
  <button class="back" onclick="backToList()">‚Üê Back</button>
  <div style="display:flex;align-items:center;gap:10px;">
    <img class="icon" id="detailIcon">
    <div>
      <h2 id="detailName"></h2>
      <button class="btn" id="ownerBtn"></button>
    </div>
  </div>
  <h3>About This App</h3>
  <p><b>Game Name:</b> <span id="detailGName"></span></p>
  <p><b>Package:</b> <span id="detailPackage"></span></p>
  <p><b>Release:</b> <span id="detailRelease"></span></p>
  <p><b>Last Update:</b> <span id="detailUpdate"></span></p>
  <p><b>Version:</b> <span id="detailVersion"></span></p>
  <p><b>Type:</b> <span id="detailType"></span></p>
  <p><b>Category:</b> <button class="btn" id="detailCategory"></button></p>
  <p id="detailDesc"></p>

  <h3>Screenshots & Video</h3>
  <div id="detailMedia" class="screens"></div>

  <h3>Recommended</h3>
  <div id="recommended"></div>
</div>

<!-- SETTINGS MODAL -->
<div id="settingsModal">
  <h3>‚öô Advanced Settings</h3>
  <label>Start Date:</label>
  <input type="date" id="startDate">
  <label>End Date:</label>
  <input type="date" id="endDate">
  <label>Theme:</label>
  <select id="themeSelect" onchange="changeTheme()">
    <option value="light">Light Theme</option>
    <option value="dark">Dark Theme</option>
  </select>
  <label>Sort By:</label>
  <select id="sortSelect" onchange="filterList()">
    <option value="default">Default</option>
    <option value="oldest">Oldest ‚Üí Newest</option>
    <option value="newest">Newest ‚Üí Oldest</option>
  </select>
  <button onclick="toggleSettings()">Close</button>
</div>

<script>
let DATA={}; let currentType='all';

fetch('info.json').then(r=>r.json()).then(j=>{DATA=j; populateTrending(); populateRandomCategory(); filterList();});

function toggleSettings(){document.getElementById('settingsModal').style.display = document.getElementById('settingsModal').style.display==='none'?'block':'none';}

function changeTheme(){
  const theme=document.getElementById('themeSelect').value;
  if(theme==='dark'){document.body.style.background='#121212'; document.body.style.color='#eee';} 
  else {document.body.style.background='#fff'; document.body.style.color='#000';}
}

function setType(t){currentType=t; filterList();}

function populateTrending(){
  const div=document.getElementById('trending'); div.innerHTML='';
  DATA.apps.forEach(g=>{if(DATA.trending_ids.includes(g.id)) div.appendChild(createCard(g));});
}

function populateRandomCategory(){
  const div=document.getElementById('randomCategory'); div.innerHTML='';
  const cats=[...new Set(DATA.apps.map(a=>a.category).filter(c=>c))];
  const randomCat=cats[Math.floor(Math.random()*cats.length)];
  DATA.apps.filter(a=>a.category===randomCat).forEach(g=>div.appendChild(createCard(g)));
}

function filterList(){
  const list=document.getElementById('list'); list.innerHTML='';
  let apps=DATA.apps.filter(a=>currentType==='all'||a.type===currentType);
  const search=document.getElementById('search').value.toLowerCase();
  if(search) apps=apps.filter(a=>a.name.toLowerCase().includes(search));
  // Date filter
  const start=document.getElementById('startDate').value;
  const end=document.getElementById('endDate').value;
  if(start) apps=apps.filter(a=>new Date(a.releaseDate)>=new Date(start));
  if(end) apps=apps.filter(a=>new Date(a.releaseDate)<=new Date(end));
  // Sorting
  const sort=document.getElementById('sortSelect').value;
  if(sort==='oldest') apps.sort((a,b)=>new Date(a.releaseDate)-new Date(b.releaseDate));
  else if(sort==='newest') apps.sort((a,b)=>new Date(b.releaseDate)-new Date(a.releaseDate));
  apps.forEach(g=>list.appendChild(createCard(g)));
}

function createCard(g){
  const div=document.createElement('div'); div.className='card'; div.onclick=()=>showDetails(g);
  let iconSrc=(g.icon==='%%FS'||g.icon==='FS')?'https://via.placeholder.com/100x100?text=Faizan+Store':g.icon||'https://via.placeholder.com/100x100?text=N/A';
  div.innerHTML=`${DATA.trending_ids.includes(g.id)?'<div class="trending">TRENDING</div>':''}
    <img src="${iconSrc}">
    <div class="title">${g.name||'N/A'}</div>
    <div class="cat">${g.category||'N/A'}</div>
    <div class="owner">${g.owner||'N/A'}</div>`;
  return div;
}

function showDetails(g){
  document.getElementById('details').style.display='block';
  document.getElementById('list').style.display='none';
  document.getElementById('trending').style.display='none';
  document.getElementById('randomCategory').style.display='none';
  document.getElementById('detailIcon').src=(g.icon==='%%FS'||g.icon==='FS')?'https://via.placeholder.com/80x80?text=Faizan+Store':g.icon||'https://via.placeholder.com/80x80?text=N/A';
  document.getElementById('detailName').innerText=g.name||'N/A';
  const ownerBtn=document.getElementById('ownerBtn'); ownerBtn.innerText=g.owner||'N/A'; ownerBtn.onclick=()=>filterByOwner(g.owner);
  document.getElementById('detailGName').innerText=g.name||'N/A';
  document.getElementById('detailPackage').innerText=g.package||'N/A';
  document.getElementById('detailRelease').innerText=g.releaseDate||'N/A';
  document.getElementById('detailUpdate').innerText=g.lastUpdate||'N/A';
  document.getElementById('detailVersion').innerText=g.versions?.length||1;
  document.getElementById('detailType').innerText=g.type||'N/A';
  const catBtn=document.getElementById('detailCategory'); catBtn.innerText=g.category||'N/A'; catBtn.onclick=()=>filterByCategory(g.category);
  const descEl=document.getElementById('detailDesc'); descEl.innerText=g.description||'N/A';
  const mediaDiv=document.getElementById('detailMedia'); mediaDiv.innerHTML='';
  if(g.assets?.screenshots) g.assets.screenshots.forEach(s=>{const img=document.createElement('img'); img.src=s; mediaDiv.appendChild(img);});
  if(g.assets?.video){const video=document.createElement('video'); video.src=g.assets.video; video.controls=true; mediaDiv.appendChild(video);}
  const recDiv=document.getElementById('recommended'); recDiv.innerHTML='';
  DATA.apps.filter(a=>a.id!==g.id&&a.type===g.type).forEach(r=>{const rec=document.createElement('div'); rec.className='rec-card'; rec.innerHTML=`<img src="${(r.icon==='%%FS'||r.icon==='FS')?'https://via.placeholder.com/40x40?text=FS':r.icon||'https://via.placeholder.com/40x40?text=N/A'}"><div><b>${r.name||'N/A'}</b><br><small>${r.category||'N/A'}</small></div>`; recDiv.appendChild(rec);});
}

function backToList(){document.getElementById('details').style.display='none'; document.getElementById('list').style.display='grid'; document.getElementById('trending').style.display='flex'; document.getElementById('randomCategory').style.display='flex';}

function filterByOwner(owner){currentType='all'; const list=document.getElementById('list'); list.innerHTML=''; DATA.apps.filter(a=>a.owner===owner).forEach(a=>list.appendChild(createCard(a));}

function filterByCategory(cat){currentType='all'; const list=document.getElementById('list'); list.innerHTML=''; DATA.apps.filter(a=>a.category===cat).forEach(a=>list.appendChild(createCard(a));}
</script>

</body>
</html>
